---
title: 解构赋值
date: 2018-12-20 22:25:21
tags: ['es6', '解构赋值']
summary: 从数组和对象中提取值，对变量进行赋值，这就是解构赋值
---
从数组和对象中提取值，对变量进行赋值，这就是解构赋值
### 数组的解构赋值
es6之前为变量赋值，只能直接指定值
```javascript
var a = 1;
var b = 2;
```

而es6允许这样
```javascript
var [a, b] = [1, 2];
```

按上面的模式，可以从数组中提取值，按对应关系对变量进行赋值
如果解构不成功，则等于`undefined`

不完全解构，解构依然成功
```javascript
let [x, y] = [1, 2, 3]
x // 1
y // 2

let [a, [b], c] = [1, [2, 3], 4]
a // 1
b // 2
c // 4
```

等号右边不是数组，则解构失败
```javascript
let [a] = 1;
let [b] = false;
let [c] = undefined;
let [d] = null;
let [e] = {};
```
以上都会报错

只要数据结构具有Iterator接口，都可以采用数组形式的解构赋值
```javascript
let [x, y, z] = new Set([1, 2, 3])
x // 1
```

#### 默认值
解构赋值允许默认值
```javascript
var [a = true] = [];
a // true
```

es6内部使用严格相等运算符判断一个位置是否有值，所以一个数组成员不严格等于undefined，默认值不会生效
```javascript
let [x = 1] = [undefined];
x // 1

let [y = 1] = [null];
y // null
```

默认值可以为函数
```javascript
f(){
    return 2
}
let [a = f()] = [undefined];
a // 2
```

### 对象的解构赋值
```javascript
var [a, b] = {a: 'A', b: 'B'};
a // A
b // B
```
数组的解构是按照顺序排列为变量赋值的，而对象则没有顺序，只要变量与属性同名即可

如果变量名与属性不一致，则必须这样写
```javascript
var {a:foo} = {a: 'A', b: 'B'};
foo // A
```

实际上，对象的解构赋值是一下形式的简写
```javascript
var {foo:f, bar:b} = {foo: 'A', bar: 'B'}
f // A
b // B
```
真正被赋值的是变量 f 和 b
需要注意的是
```javascript
let baz;
let {bar:baz} = {bar:1} // 报错 baz重复申明
```

#### 默认值
```javascript
var {x, y = 1} = {x:1}
y // 1
```

### 字符串的解构赋值
```javascript
const [a, b, c, d, e] = 'hello';
a // h
b // e
c // l
d // l
e // o
```