---
title: 数组方法
date: 2018-11-12 21:17:58
tags: ['js', '数组']
summary: js数组的所有内置方法
---
先看下数组对象有多少原型方法


![屏幕快照 2018-11-10 22.24.08.png | center | 294x529](https://cdn.nlark.com/yuque/0/2018/png/115449/1541860173619-d7bf4b5e-3ee4-47f7-b08c-de09144d9f70.png "")


### concat()
用一个数组合并其他一个或多个数组，返回合并后的数组
```javascript
var arr = [1,2,3].concat([4,5],[6,7]) 
// [1, 2, 3, 4, 5, 6, 7]
```

### copyWithin()
`copyWithin(target, start = 0, end = this.length)`，es6新增方法，<span data-type="color" style="color:rgb(0, 0, 0)"><span data-type="background" style="background-color:rgb(255, 255, 255)">操作当前数组，用来把某些个位置的元素复制并覆盖到其他位置上去</span></span>
该函数有三个参数
target：覆盖的起始位置
start：复制的起始位置，可以省略，可以是负数
end：复制的结束位置，可以省略，省略即截止到最后一位，可以是负数，实际结束位置是end-1

具体看实例
```javascript
var fruits = [1,2,3,4,5,6,7,8,9];
fruits.copyWithin(1,3,6);
console.log(fruits) // [1, 4, 5, 6, 5, 6, 7, 8, 9]
```
复制下标3到6的元素（不包括6） [1,2,3,<span data-type="color" style="color:#F5222D">4,5,6</span>,7,8,9]，从下表1开始覆盖，且被覆盖掉了3位，即[1,<span data-type="color" style="color:#F5222D">2,3,4</span>,5,6,7,8,9]覆盖掉了，最后为[1, <span data-type="color" style="color:#F5222D">4, 5, 6</span>, 5, 6, 7, 8, 9]

### every()
判断数组中是否每个元素都满足条件，只有都满足条件才返回true，只要有一个不满足就返回false
```javascript
var fruits = ["Banana", "Orange", "Apple", "Mango"];
var tem = fruits.every(function(value, index, array){
  return typeof value === 'string';
})
console.log(tem) // true
```

### fill()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">用一个固定值填充一个数组中从起始索引到终止索引内的全部元素。不包括终止索引</span></span>
省略终止索引，则一直替换到结尾
省略索引，则数组元素全部被替换
```javascript
var array = [1, 2, 3, 4, 5, 6, 7];
// 用"a"替换掉索引2到4位置的元素（不包括4）
var tem = array.fill('a',2,4)
console.log(tem) // [1, 2, "a", "a", 5, 6, 7]
```

### filter()
通过条件过滤掉数组中的一些元素，返回处理后的新数组
函数中通过返回true/false来判断是否过滤掉该元素
```javascript
var arr = [1,"A","B",4,"C"];
var arr1 = arr.filter(function(value, index, array){
    // 保留字符串类型的元素
  if(typeof value === 'string')return true;
  return false;
})
console.log(arr1); // ["A", "B", "C"]
```

### find()
es6新增
返回符合条件的第一个元素，否则返回`undefined`
```javascript
var arr = [
  {name:'lucy', age: 20},
  {name: 'yumi', age: 18},
  {name: 'tom', age: 22}
];
var ele = arr.find(function(value, index, array){
  return value.age > 18
})
console.log(ele) // {name:'lucy', age: 20}
```

### findIndex()
es6新增
返回符合条件的第一个元素的索引，否则返回 -1
```javascript
var arr = [
  {name:'lucy', age: 20},
  {name: 'yumi', age: 18},
  {name: 'tom', age: 22}
];
var index = arr.findIndex(function(value, index, array){
  return value.age > 18
})
console.log(index) // 0
```

### flat(depth）
递归到指定深度将所有数组元素连接，并返回一个新数组
depth默认值为1
会移除掉数组中的空项
```javascript
var arr = [1, , 2, 3, '',[1,2,[3,4]], {name:'lucy'}];
arr.flat(); // [1, 2, 3, 1, 2, [3, 4], {name:'lucy'}]
arr.flat(2); // [1, 2, 3, "", 1, 2, 3, 4, {name:'lucy'}]

```

### flatMap()
改<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">方法首先使用映射函数映射每个元素，然后将结果压缩成一个新数组。它与 </span></span>[map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)"> 和 深度值1的 </span></span>[flat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)"> 几乎相同，但</span></span>`flatMap`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">通常在合并成一种方法的效率稍微高一些</span></span>
```javascript
let arr = ['今天天气不错', '早上好']

var a = arr.map(s => s.split(''))
console.log(a) // [ [ '今', '天', '天', '气', '不', '错' ], [ '早', '上', '好' ] ]

var b = arr.flatMap(s => s.split(''));
console.log(b) // ["今", "天", "天", "气", "不", "错", "早", "上", "好"]
```

### forEach()
最单纯的数组循环方法
```javascript
var array=[1,2,3];
array.forEach(function(value,index,data){
    // code
});
```

### includes()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">判断一个数组是否包含一个指定的值，包含则返回 true，否则返回false</span></span>
```javascript
var array1 = [1, 2, 3];
console.log(array1.includes(2)); // true
```

### indexOf()
返回元素的第一个索引值，否则返回 -1
```javascript
var arr = ['a', '3', 'b', 3, '3'];
arr.indexOf('3') // 1
arr.indexOf('c') // -1
```

### lastIndexOf()
返回元素的最后一个索引值，否则返回 -1
```javascript
var arr = ['a', '3', 'b', 3, '3'];
arr.lastIndexOf('3') // 4
```

### join()
通过分隔符（默认值为逗号—— , ）将数组元素连接为一个字符串
```javascript
var arr = ['a', 'b', 3, 4];
var arr1 = arr.join('#');
console.log(arr1) // a#b#3#4
```

### map()
循环处理数组的每一个元素，并返回处理后的数据集合数组
```javascript
// 实例1
var arr = [1, 2, 3, 4];
var ele = arr.map(function(value, index, array){
  console.log(value, index, array)
  return value+=2
})
console.log(ele) // [3, 4, 5, 6]

// 实例2
var arr = [
  {name:'lucy', age: 20},
  {name: 'yumi', age: 18},
  {name: 'tom', age: 22}
];
var ele = arr.map(function(value, index, array){
  return value.age+=2
})
// 由此可知，可以将元素的某些数据单独作为一个新的数组提取出来
// 如：单独获取arr中age组成的数组
console.log(ele) // [22, 20, 24]
```

### pop()
删除原数组最后一个元素，并`返回删除的元素`，原数组被修改
```javascript
var arr = [1, 2, 3, 4];
var ele = arr.pop();
console.log(arr) // [1, 2, 3]
console.log(ele) // 4
```

### push()
向数组末尾添加一个或多个元素，并返回`新数组的长度`
```javascript
var arr = [1, 2, 3, 4];
var len = arr.push(5);
console.log(arr) // [1, 2, 3, 4, 5]
console.log(len) // 5
```

### reduce()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">对累计器和数组中的每个元素（从左到右）应用一个函数，将其简化为单个值</span></span>
接收4个参数
1. Accumulator (acc) (累计器) 回调的返回值，即上一次处理的结果
2. Current Value (cur) (当前值)
3. Current Index (idx) (当前索引)
4. Source Array (src) (源数组)
```javascript
var arr = [2,3,4,5];
var sum = arr.reduce(function(a,b,c,d){
  console.log(a,b,c,d)
  return a + b
},'a')
// 'a'为定义累计器的初始值，默认为数组的第一个元素
console.log(sum)
```


![屏幕快照 2018-11-12 16.16.21.png | center | 296x110](https://cdn.nlark.com/yuque/0/2018/png/115449/1542010608685-a2330c14-61a4-4af2-a5de-f3af6bacfcd0.png "")


### reduceRight()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">对累计器和数组中的每个元素（从右到左）应用一个函数，将其简化为单个值</span></span>
其他与`reduce()`一模一样

### reverse()
<span data-type="color" style="color:rgb(0, 0, 0)"><span data-type="background" style="background-color:rgb(253, 252, 248)">颠倒数组中元素的顺序，修改原数组，返回新数组</span></span>
```javascript
var arr = ['a', '3', 'b', 3, '3'];
var el = arr.reverse();
console.log(el) // ["3", 3, "b", "3", "a"]
console.log(arr) // ["3", 3, "b", "3", "a"]
```

### shift()
删除原数组的第一个元素，并返回该元素，当数组为空时，不做任何操作，返回 undefined
```javascript
var arr = [1, 2, 3, 4];
var ele = arr.shift();
console.log(arr); // [2, 3, 4]
console.log(ele); // 1
```

### unshift()
向原数组末尾添加元素，原数组被修改并返回数组长度
```javascript
var arr = [1, 2, 3, 4];
var len = arr.unshift(5,6);
console.log(arr); // [5, 6, 1, 2, 3, 4]
console.log(len); // 6
```

### slice(begin, end)
数组截取，截取<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">从 </span></span>`begin`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)"> 到 </span></span>`end `<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">的所有元素（包含begin，但不包含end）</span></span>
begin: 起始索引值，默认值为0
end: end被省略时，则将会截取到数组最后
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">如果该参数为负数， </span></span>`则它表示在原数组中的倒数第几个元素结束抽取`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">。 </span></span>`slice(-2,-1)`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">表示抽取了原数组中的倒数第二个元素到最后一个元素（不包含最后一个元素，也就是只有倒数第二个元素）</span></span>
```javascript
var arr = [2,3,4,5];
var arr1 = arr.slice(1,3);
console.log(arr1) // [3, 4]
```

### some()
为数组中的每一个函数执行一次callback函数，直到返回true并终止循环，否则返回false
```javascript
var arr = [2,3,4,5];
var bool = arr.some(function(value, index){
  return value > 3
})
console.log(bool) // true
```

### sort()
指定按某种顺序对原数组进行排序，返回新数组，<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">原数组被修改，默认排序顺序是根据字符串Unicode码点</span></span>
```javascript
var arr = [2,11, 13, 24, 5, 8];
arr.sort();
console.log(arr) // [11, 13, 2, 24, 5, 8]
```

<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">要比较数字而非字符串，比较函数可以简单的以 a 减 b，如下的函数将会将数组升序排列</span></span>
```javascript
var arr = [2,11, 13, 24, 5, 8];
arr.sort(function(a, b) {
  return a - b;
});
console.log(arr); // [2, 5, 8, 11, 13, 24]
```

发现函数返回负数的话，会将当前元素往后排列
于是我们可以用来颠倒数组
```javascript
var numbers = [4, 2, 5, 1, 3]; 
numbers.sort(function(a,b){
  return -1
}); 
console.log(numbers); // [3, 1, 5, 2, 4]
```

### splice(start, ?num, ?item1,item2...)
删除数组中指定位置的元素，并用一个或多个元素替换它们的位置，返回被删除的元素组成的数组
start: 起始索引值，如果为负数，则从末尾倒数
num: <span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">表示要删除的元素的个数, 0或负数，不删除，如果省略，则一直删除到末尾</span></span>
item1,item2：添加进去的元素

### toString()
返回一数组元素用逗号连接的字符串
注意是怎么处理数组元素和对象元素的
```javascript
var arr = ['a', '3', 'b', 3, '3',[1,2,[3,4]],{name:'lucy'}];
var str = arr.toString();
console.log(str) // a,3,b,3,3,1,2,3,4,[object Object]
```

### values()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">返回一个新的 </span></span>__`Array Iterator`__<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)"> 对象，该对象包含数组每个索引的值</span></span>
### keys()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">返回一个新的 </span></span>__`Array Iterator`__<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)"> 对象，该对象包含数组每个索引键</span></span>
### entries()
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">返回一个新的 </span></span>__`Array Iterator`__<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)"> 对象</span></span><span data-type="color" style="color:rgb(79, 79, 79)"><span data-type="background" style="background-color:rgb(255, 255, 255)">，该对象包含数组中每个索引对应的键/值对</span></span>
```javascript
var fruits = ["Banana", "Orange", "Apple", "Mango"];
var a = fruits.entries();
var b = fruits.keys();
var c = fruits.values();

for(let item of a){
  console.log(item)
}
// [0, "Banana"]
// [1, "Orange"]
// [2, "Apple"]
// [3, "Mango"]

for(let item of b){
  console.log(item)
}
// 0
// 1
// 2
// 3

for(let item of c){
  console.log(item)
}
// Banana
// Orange
// Apple
// Mango
```