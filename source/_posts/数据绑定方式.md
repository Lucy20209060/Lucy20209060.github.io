---
title: 数据绑定方式
date: 2018-11-18 17:43:34
tags: js
summary:
---
## 发布者-订阅者模式（backbone.js）
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">一般通过sub, pub的方式实现数据和视图的绑定监听，更新数据方式通常做法是 </span></span>`vm.set('property', value)`
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">这种方式现在毕竟太low了，我们更希望通过 </span></span>`vm.property = value `<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">这种方式更新数据，同时自动更新视图，于是有了下面两种方式</span></span>

## 脏值检查（angular.js） 
angular.js 是通过脏值检测的方式比对数据是否有变更，来决定是否更新视图，大致如下：
* DOM事件，譬如用户输入文本，点击按钮等。( ng-click )
* XHR响应事件 ( \$http )
* 浏览器Location变更事件 ( \$location )
* Timer事件( \$timeout , \$interval )
* 执行 \$digest() 或 \$apply()

## 数据劫持（vue.js）
<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过</span></span>`Object.defineProperty()`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">来劫持各个属性的</span></span>`setter`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">，</span></span>`getter`<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">，在数据变动时发布消息给订阅者，触发相应的监听回调。</span></span>