<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Lucy"><title>Python—文件和异常 · 长剑腥腥挂壁</title><meta name="description" content="读取整个文件test.txt1234tank n. 坦克; 油[水]箱; 贮水池; 酒量大的人; vt. 把…贮放在柜内; 打败;tanks n. 坦克; 油[水]箱，罐，槽( tank的名词复数 ); 水罐;tanker n. 油轮; 油罐车; 一辆坦克乘员中的一名;tank top 油罐顶盖; "><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/logo-2.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo-2.png" style="width:127px;"><h3 title=""><a href="/">长剑腥腥挂壁</a></h3></div></div><ul class="social-links"></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/logo-2.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Python—文件和异常</a></h3></div><div class="post-content"><h3 id="读取整个文件"><a href="#读取整个文件" class="headerlink" title="读取整个文件"></a>读取整个文件</h3><p>test.txt<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tank n. 坦克; 油[水]箱; 贮水池; 酒量大的人; vt. 把…贮放在柜内; 打败;</span><br><span class="line">tanks n. 坦克; 油[水]箱，罐，槽( tank的名词复数 ); 水罐;</span><br><span class="line">tanker n. 油轮; 油罐车; 一辆坦克乘员中的一名;</span><br><span class="line">tank top 油罐顶盖; 背心装;</span><br></pre></td></tr></table></figure></p>
<p>read.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    contents = file_obj.read()</span><br><span class="line">    print(contents)</span><br></pre></td></tr></table></figure></p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/115449/1547632927992-918f5168-1a43-4e6b-9829-981c83dacf9a.png#align=left&amp;display=inline&amp;height=93&amp;linkTarget=_blank&amp;name=%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-16%2018.01.37.png&amp;originHeight=93&amp;originWidth=556&amp;size=88298&amp;width=556" alt="屏幕快照 2019-01-16 18.01.37.png"></p>
<p>关键字with在不再需要访问文件后将其关闭<br>open()函数接受一个参数，要打开的文件名称<br>read()读取文件的全部内容，并将其作为一个长长的字符串存储在变量contents中</p>
<h4 id="文件路径"><a href="#文件路径" class="headerlink" title="文件路径"></a>文件路径</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'/Users/lc/Desktop/demo/pythonDemo/file/test.txt'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    contents = file_obj.read()</span><br><span class="line">    print(contents)</span><br></pre></td></tr></table></figure>
<p>而在window系统中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'C:\Users\lc\Desktop\demo\pythonDemo\file\test.txt'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    contents = file_obj.read()</span><br><span class="line">    print(contents)</span><br></pre></td></tr></table></figure></p>
<h3 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>, <span class="string">'a'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    file_obj.write(<span class="string">'I Love You'</span>)</span><br></pre></td></tr></table></figure>
<p>open()第二个参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>功能</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>读取</td>
<td>读取文件内容</td>
</tr>
<tr>
<td>w</td>
<td>写入</td>
<td>覆盖原内容</td>
</tr>
<tr>
<td>a</td>
<td>附加</td>
<td>紧接原内容后面添加</td>
</tr>
<tr>
<td>r+</td>
<td>读取和写入</td>
<td>可读取也可写入</td>
</tr>
</tbody>
</table>
<h4 id="写入多行"><a href="#写入多行" class="headerlink" title="写入多行"></a>写入多行</h4><p>write()函数不会在你写入的文本末尾添加换行符，因此换行需要在write()中包含换行符<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    file_obj.write(<span class="string">'I Love You\n'</span>)</span><br><span class="line">    file_obj.write(<span class="string">'I Love You\n'</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="附加到文件"><a href="#附加到文件" class="headerlink" title="附加到文件"></a>附加到文件</h4><p>添加文件，而不是覆盖原有文件，则使用附加模式打开文件。如果指定的文件不存在，则会新建文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>, <span class="string">'a'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    file_obj.write(<span class="string">'I Love You\n'</span>)</span><br><span class="line">    file_obj.write(<span class="string">'I Love You\n'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="json-dump-和json-load"><a href="#json-dump-和json-load" class="headerlink" title="json.dump()和json.load()"></a>json.dump()和json.load()</h3><p>json.fump()接受两个参数：要存储的数据以及可用于存储数据的文件对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">file_path = <span class="string">'num.json'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>) <span class="keyword">as</span> file_obj:</span><br><span class="line">    json.dump(numbers, file_obj)</span><br></pre></td></tr></table></figure></p>
<p>打开 num.json 发现内容数据为 <code>[1,2,3,4,5,6,7]</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">file_path = <span class="string">'num.json'</span></span><br><span class="line"><span class="keyword">with</span> open(file_path) <span class="keyword">as</span> file_obj:</span><br><span class="line">    numbers = json.load(file_obj)</span><br><span class="line"></span><br><span class="line">print(numbers) <span class="comment"># [1,2,3,4,5,6,7]</span></span><br></pre></td></tr></table></figure>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>Python使用异常的特殊对象来管理程序执行期间发生的错误。每当Python发生错误时，它都会创建一个异常对象。如果你编写了处理异常的代码，程序将继续运行。如果未对异常进行处理，程序将停止，显示异常的报告</p>
<h4 id="使用try-except处理ZeroDivisionError异常"><a href="#使用try-except处理ZeroDivisionError异常" class="headerlink" title="使用try-except处理ZeroDivisionError异常"></a>使用try-except处理ZeroDivisionError异常</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">5</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    print(<span class="string">'You can`t divide by zero'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="else"><a href="#else" class="headerlink" title="else"></a>else</h4><p>将可能引发错误的代码放在try-except中，可提高这个程序抵御错误的能力。该示例包含else代码块，依赖于try代码块成功执行的代码都应该放在else中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">5</span>/<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    print(<span class="string">'You can`t divide by zero'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'没有遇到错误'</span>)</span><br></pre></td></tr></table></figure></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-01-18</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Python/" title="Python">Python </a><a class="tag" href="/tags/文件/" title="文件">文件 </a><a class="tag" href="/tags/异常/" title="异常">异常 </a></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/01/17/Python—类/" title="Python—类">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>