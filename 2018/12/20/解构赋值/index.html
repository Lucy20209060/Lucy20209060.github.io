<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Lucy"><title>解构赋值 · 长剑腥腥挂壁</title><meta name="description" content="从数组和对象中提取值，对变量进行赋值，这就是解构赋值
数组的解构赋值es6之前为变量赋值，只能直接指定值12var a = 1;var b =2;
而es6允许这样1var [a, b] = [1, 2];
按上面的模式，可以从数组中提取值，按对应关系对变量进行赋值如果解构不成功，则等于undefi"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/logo-2.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo-2.png" style="width:127px;"><h3 title=""><a href="/">长剑腥腥挂壁</a></h3></div></div><ul class="social-links"></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/logo-2.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>解构赋值</a></h3></div><div class="post-content"><p>从数组和对象中提取值，对变量进行赋值，这就是解构赋值</p>
<h3 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h3><p>es6之前为变量赋值，只能直接指定值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b =<span class="number">2</span>;</span><br></pre></td></tr></table></figure></p>
<p>而es6允许这样<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>];</span><br></pre></td></tr></table></figure></p>
<p>按上面的模式，可以从数组中提取值，按对应关系对变量进行赋值<br>如果解构不成功，则等于<code>undefined</code></p>
<p>不完全解构，解构依然成功<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, [b], c] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>]</span><br><span class="line">a <span class="comment">// 1</span></span><br><span class="line">b <span class="comment">// 2</span></span><br><span class="line">c <span class="comment">// 4</span></span><br></pre></td></tr></table></figure></p>
<p>等号右边不是数组，则解构失败<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [b] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [c] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [d] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> [e] = &#123;&#125;;</span><br></pre></td></tr></table></figure></p>
<p>以上都会报错</p>
<p>只要数据结构具有Iterator接口，都可以采用数组形式的解构赋值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y, z] = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">x <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>解构赋值允许默认值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [a=<span class="literal">true</span>] = [];</span><br><span class="line">a <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>es6内部使用严格相等运算符判断一个位置是否有值，所以一个数组成员不严格等于undefined，默认值不会生效<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [y = <span class="number">1</span>] = [<span class="literal">null</span>];</span><br><span class="line">y <span class="comment">// null</span></span><br></pre></td></tr></table></figure></p>
<p>默认值可以为函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a = f()] = [<span class="literal">undefined</span>];</span><br><span class="line">a <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<h3 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [a, b] = &#123;<span class="attr">a</span>: <span class="string">'A'</span>, <span class="attr">b</span>: <span class="string">'B'</span>&#125;;</span><br><span class="line">a <span class="comment">// A</span></span><br><span class="line">b <span class="comment">// B</span></span><br></pre></td></tr></table></figure>
<p>数组的解构是按照顺序排列为变量赋值的，而对象则没有顺序，只要变量与属性同名即可</p>
<p>如果变量名与属性不一致，则必须这样写<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123;<span class="attr">a</span>:foo&#125; = &#123;<span class="attr">a</span>: <span class="string">'A'</span>, <span class="attr">b</span>: <span class="string">'B'</span>&#125;;</span><br><span class="line">foo <span class="comment">// A</span></span><br></pre></td></tr></table></figure></p>
<p>实际上，对象的解构赋值是一下形式的简写<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123;<span class="attr">foo</span>:f, <span class="attr">bar</span>:b&#125; = &#123;<span class="attr">foo</span>: <span class="string">'A'</span>, <span class="attr">bar</span>: <span class="string">'B'</span>&#125;</span><br><span class="line">f <span class="comment">// A</span></span><br><span class="line">b <span class="comment">// B</span></span><br></pre></td></tr></table></figure></p>
<p>真正被赋值的是变量 f 和 b<br>需要注意的是<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> baz;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">bar</span>:baz&#125; = &#123;<span class="attr">bar</span>:<span class="number">1</span>&#125; <span class="comment">// 报错 baz重复申明</span></span><br></pre></td></tr></table></figure></p>
<h4 id="默认值-1"><a href="#默认值-1" class="headerlink" title="默认值"></a>默认值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123;x, y = <span class="number">1</span>&#125; = &#123;<span class="attr">x</span>:<span class="number">1</span>&#125;</span><br><span class="line">y <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串的解构赋值"><a href="#字符串的解构赋值" class="headerlink" title="字符串的解构赋值"></a>字符串的解构赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b, c, d, e] = <span class="string">'hello'</span>;</span><br><span class="line">a <span class="comment">// h</span></span><br><span class="line">b <span class="comment">// e</span></span><br><span class="line">c <span class="comment">// l</span></span><br><span class="line">d <span class="comment">// l</span></span><br><span class="line">e <span class="comment">// o</span></span><br></pre></td></tr></table></figure></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-12-20</span><i class="fa fa-tag"></i><a class="tag" href="/tags/es6/" title="es6">es6 </a><a class="tag" href="/tags/解构赋值/" title="解构赋值">解构赋值 </a></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/12/19/export和import/" title="export和import">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>