<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Lucy"><title>函数防抖和函数节流 · 长剑腥腥挂壁</title><meta name="description" content="两者都是对触发频率的控制
函数防抖(debounce)就是连续的甚至是疯狂的没有频率的触发某个动作，当停止时，只执行最后一个触发，这样避免了很多无效的触发就像公交车司机师傅只会在最后一个人上车后，才关上车门适用于

表单组件输入内容验证
防止多次点击导致表单多次提交

等情况，防止函数过于频繁的不必"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/logo-2.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo-2.png" style="width:127px;"><h3 title><a href="/">长剑腥腥挂壁</a></h3></div></div><ul class="social-links"></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/logo-2.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>函数防抖和函数节流</a></h3></div><div class="post-content"><p>两者都是对触发频率的控制<br><a name="166d3c51"></a></p>
<h3 id="函数防抖-debounce"><a href="#函数防抖-debounce" class="headerlink" title="函数防抖(debounce)"></a>函数防抖(debounce)</h3><p>就是连续的甚至是疯狂的没有频率的触发某个动作，当停止时，只执行最后一个触发，这样避免了很多无效的触发<br>就像公交车司机师傅只会在最后一个人上车后，才关上车门<br>适用于</p>
<ul>
<li>表单组件输入内容验证<br></li>
<li>防止多次点击导致表单多次提交<br></li>
</ul>
<p>等情况，防止函数过于频繁的不必要的调用</p>
<p>在后台管理系统页面的开发中，不可避免的要开发筛选组件，通过筛选条件的改变实时获取后台数据然后展示在页面中，是一个很友好的交互<br><img src="https://cdn.nlark.com/yuque/0/2018/png/115449/1539153272919-0d7380a6-b0a2-4366-be19-5cb42758d582.png#align=left&amp;display=inline&amp;height=284&amp;originHeight=742&amp;originWidth=1952&amp;status=done&amp;width=747" alt></p>
<p>value值的改变，实时搜索数据，通过input的onChange函数实时获取数据的话，请求动作过于频繁，不妥<br>这时候就需要一个延时函数，它的作用是，我输入的过程中不会去做任何的动作，输入完成后再去请求数据</p>
<p>函数实现<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> debounce = <span class="function">(<span class="params">func, delay</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 短时间内清除上一个定时器 不会重复触发fn</span></span><br><span class="line">    <span class="keyword">var</span> timer=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        clearTimeout(timer);</span><br><span class="line">        timer=setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            func();</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;,delay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; debounce &#125; <span class="keyword">from</span> <span class="string">'xxx'</span></span><br><span class="line"></span><br><span class="line">onChange() &#123;</span><br><span class="line">    debounce(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">// code</span></span><br><span class="line">    &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>完美</p>
<p><a name="1258ad45"></a></p>
<h3 id="函数节流-throttle"><a href="#函数节流-throttle" class="headerlink" title="函数节流(throttle)"></a><a href="https://www.yuque.com/luchao/blog/ogiw6g#l7wkva" target="_blank" rel="noopener"></a>函数节流(throttle)</h3><p>一个事件没有频率的被频繁触发多次，节流函数可以按照固定频率去执行对应的事件处理方法，目的是降低函数触发频率，避免重复执行不必要的请求<br>函数实现<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> throttle = <span class="function">(<span class="params">func, wait</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) <span class="keyword">return</span>;</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      func();</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;, wait);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; throttle &#125; <span class="keyword">from</span> <span class="string">'xxx'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onscroll=throttle(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-10-10</span><i class="fa fa-tag"></i><a class="tag" href="/tags/js/" title="js">js </a><a class="tag" href="/tags/函数防抖/" title="函数防抖'">函数防抖' </a><a class="tag" href="/tags/函数节流/" title="函数节流">函数节流 </a></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/10/11/js垃圾回收/" title="js垃圾回收">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/10/09/React三种diff算法/" title="React三种diff算法">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>